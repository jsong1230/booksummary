# PRD: BookSummary 자동화 영상 제작 플랫폼

## 1. 문서 정보

| 항목 | 내용 |
|------|------|
| **문서명** | BookSummary 자동화 영상 제작 플랫폼 PRD |
| **버전** | 1.0.0 |
| **최종 수정일** | 2026-02-20 |
| **작성자** | Engineering Team |
| **상태** | 활성 (Active) |
| **대상** | 프로젝트 관리팀, 개발팀, 콘텐츠 팀 |

---

## 2. 제품 개요

### 2.1 제품 목적

BookSummary는 책 내용을 자동으로 분석하여 유튜브에 게시할 수 있는 고품질의 영상으로 변환하는 자동화 파이프라인입니다. 사용자는 최소한의 수작업으로 책 요약 영상과 리뷰 영상을 생성하고, 메타데이터를 자동으로 최적화하여 유튜브에 배포할 수 있습니다.

### 2.2 핵심 가치

- **자동화**: 수작업을 최소화하여 제작 시간 70% 단축
- **다국어 지원**: 한글과 영문 영상을 동시에 생성
- **품질 관리**: AI 검증을 통한 이미지 선택 및 메타데이터 최적화
- **확장성**: 여러 영상 포맷(Summary+Video, 일당백)을 지원
- **분석 기반**: 유튜브 분석 데이터를 기반으로 성과 최적화

### 2.3 타겟 사용자

1. **콘텐츠 크리에이터**: 책 리뷰 영상을 정기적으로 제작하는 유튜버
2. **출판사/마케팅팀**: 책 홍보 및 마케팅 자동화를 원하는 팀
3. **교육 기관**: 독서 교육 콘텐츠를 생성하는 교육자
4. **개인 개발자**: 자신의 책 요약 영상을 만들고자 하는 개인

### 2.4 주요 성과 지표

- 월간 영상 생성 수: 20개 이상
- 유튜브 조회수: 월 50,000회 이상
- 채널 구독자 증가: 월 1,000명 이상
- 영상 제작 시간: 평균 30분 이내

---

## 3. 제품 범위

### 3.1 In Scope (포함 범위)

#### 핵심 기능
- 책 요약 자동 생성 (Claude/OpenAI API 활용)
- TTS 음성 합성 (OpenAI, Google Cloud, Replicate)
- 다국어 영상 생성 (한글, 영문)
- 유튜브 메타데이터 자동 생성 및 최적화
- 유튜브 업로드 및 배포
- 유튜브 분석 데이터 수집 및 보고

#### 외부 통합
- Google Books API
- Pexels, Pixabay, Unsplash API
- OpenAI API (GPT, TTS, Whisper)
- Claude API
- Google Cloud TTS
- YouTube Data API v3
- Aladin 제휴 링크
- Amazon Associates

#### 운영 기능
- 배치 작업 (일괄 메타데이터 업데이트, 제휴 링크 추가)
- 파일 자동 처리 (input 폴더 파싱)
- 책 정보 CSV 관리
- 업로드 일정 최적화

### 3.2 Out of Scope (미포함 범위)

- 유튜브 커뮤니티 포스팅 자동 생성 (수동 관리)
- 실시간 스트림 생성
- 사용자 권한 관리 시스템
- 모바일 앱 개발
- 다국어 자막 번역 (영상 단순 제작만 지원)
- 고급 비디오 편집 기능 (커팅, 효과 추가 등)
- 소셜 미디어 동기화 (인스타그램, 트위터 등)

---

## 4. 사용자 페르소나

### 4.1 페르소나 1: 활동적인 콘텐츠 크리에이터 (기본)

**이름**: 김유튜버 (30대 중반)
**경험**: 유튜브 채널 2년 운영, 약 10만 구독자
**목표**: 일주일에 3-4개의 책 리뷰 영상을 안정적으로 제작
**통증점**:
- 영상 제작 시간이 많이 소요 (이미지 검색, 음성 녹음, 자막 작성)
- 영상 품질 일관성 유지 어려움
- 유튜브 메타데이터 최적화에 시간 낭비

**사용 패턴**:
- 주 3회 영상 제작 요청
- 기본 설정 변경 없이 기본값으로 사용
- 업로드 전 영상 확인 필수

### 4.2 페르소나 2: 출판사 마케팅팀 (고급)

**이름**: 이마케팅 (40대 초반)
**경험**: 출판사 마케팅팀 리더, 15년 경력
**목표**: 신간 도서 출시 시 마케팅 자동화, 월 10-15개 영상 생성
**통증점**:
- 여러 도서의 메타데이터 일괄 관리 복잡성
- 제휴 링크 관리 및 성과 추적 어려움
- 다국어 지원 필요

**사용 패턴**:
- 일괄 작업 (배치 업로드) 선호
- CSV 기반 데이터 관리
- 상세 분석 리포트 필요
- 커스텀 설정 및 통합 요청

### 4.3 페르소나 3: 개인 개발자 (초급)

**이름**: 박개발자 (20대 후반)
**경험**: 유튜브 채널 6개월, 약 1천 구독자
**목표**: 비용 효율적으로 월 1-2개 영상 생성
**통증점**:
- 기술적 이해 부족
- 비용 최적화 (무료/저비용 옵션 선호)
- 간단한 워크플로우 필요

**사용 패턴**:
- 기본 템플릿 사용
- 가이드 문서에 따라 단계별 진행
- 문제 해결에 시간 낭비

---

## 5. 기능 요구사항 (Functional Requirements)

### 5.1 핵심 영상 제작 기능

#### FR-001: Summary+Video 포맷 생성
**설명**: 5분 분량의 큐레이션된 요약 + NotebookLM 비디오 세그먼트를 하나의 영상으로 합성

**세부 요구사항**:
- Hook(도입) → Body(본론) → Bridge(전환) 구조 자동 생성
- TTS 음성으로 요약 내레이션 추가
- 무드 이미지를 Ken Burns 효과와 함께 표시
- 자동 자막 생성 (Whisper 기반 단어 단위 타이밍)
- 배경 음악 자동 적용

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-002: 일당백 에피소드 포맷 생성
**설명**: Part 1→Part 2→Part 3... 순서로 복수의 비디오를 순차적으로 연결하여 하나의 에피소드 영상 생성

**세부 요구사항**:
- 각 파트 사이에 인포그래픽 슬라이드 삽입
- 부드러운 전환 효과 (페이드, 슬라이드 등)
- 파트별 배경음악 자동 적용
- 통일된 타이틀 및 엔딩 크레딧
- 자동 챕터 마커 생성

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-003: 자동 요약 생성
**설명**: 책의 핵심 내용을 자동으로 분석하여 5분 분량(약 750단어) 요약 스크립트 생성

**세부 요구사항**:
- Hook(흥미로운 질문/인용) 생성
- Body(핵심 개념 3-5개) 설명
- Bridge(실생활 적용) 예시
- Claude API 또는 OpenAI GPT-4 활용
- 마크다운 형식으로 메타데이터 주석 처리
- 한글/영문 동시 생성

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-004: 다국어 동시 생성
**설명**: 한글과 영문 영상을 동시에 생성하고 배포

**세부 요구사항**:
- 한글(ko) 및 영문(en) 버전 자동 생성
- 번역 매핑 테이블 관리 (책 제목, 저자명 450+개)
- 각 언어별 독립적인 TTS 음성 적용
- 언어별 유튜브 설명 및 태그 자동 생성
- YouTube Localizations 필드 지원

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-005: 동적 자막 생성 (Kinetic Typography)
**설명**: 오디오의 핵심 키워드를 추출하여 화면에 시각적으로 표시

**세부 요구사항**:
- Whisper 기반 단어 단위 타이밍 추출
- AI로 핵심 키워드 자동 선별
- 팝 효과(Pop) 또는 슬라이드 애니메이션
- 글꼴 크기 및 색상 자동 결정
- 배경과 대비 가능한 색상 선택

**우선순위**: Should Have
**구현 상태**: 부분 구현 (Whisper 타이밍 확보, 애니메이션 개선 필요)

---

### 5.2 음성 및 TTS 기능

#### FR-006: 다중 TTS 엔진 지원
**설명**: 여러 TTS 제공자를 지원하여 사용자가 음성 품질과 비용에 따라 선택 가능

**세부 요구사항**:
- OpenAI TTS (기본값, nova/alloy/echo 등)
- Google Cloud Neural2 (한국어 발음 최적)
- Replicate xtts-v2 (오픈소스 기반)
- ElevenLabs (다국어 지원, 향후 확장)
- 제공자별 음성 목록 표시 및 선택

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-007: 음성 선택 및 커스터마이징
**설명**: TTS 제공자에 따라 사용 가능한 음성을 제시하고 사용자가 선택

**세부 요구사항**:
- OpenAI: 한국어 nova(여성), 영어 alloy(중성) 권장
- Google Cloud: 한국어 ko-KR-Neural2-A(여성), 영어 en-US-Neural2-C
- 음성 샘플 미리 듣기 (향후 추가)
- 기본값: OpenAI nova (한글), alloy (영어)

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-008: 음성 볼륨 조절
**설명**: 요약 음성과 배경 음악의 볼륨을 사용자가 조정

**세부 요구사항**:
- 요약 음성 볼륨 배수 설정 (기본값 1.2배)
- 배경 음악 볼륨 자동 조정
- 동적 다이나믹 레인지 압축 (DRC) 선택적 적용

**우선순위**: Could Have
**구현 상태**: 구현됨

---

#### FR-009: 배경 음악 자동 감지 및 적용
**설명**: 인포그래픽 슬라이드에 자동으로 배경음악 추가

**세부 요구사항**:
- Pixabay Music 또는 Free Music Archive 통합
- 책 장르/분위기에 맞는 음악 자동 선택
- 음악 길이를 영상 길이에 맞춰 자동 조정
- 저작권 표시 자동 추가

**우선순위**: Should Have
**구현 상태**: 부분 구현 (수동 선택 필요)

---

### 5.3 시각화 및 이미지 기능

#### FR-010: 무드 이미지 수집 및 검증
**설명**: 책 주제와 관련된 고품질 이미지 100개를 자동으로 수집하고 AI 검증

**세부 요구사항**:
- Pexels → Pixabay → Unsplash 우선순위 순서로 다운로드
- 130개 다운로드 후 Claude AI로 관련성 점수 계산
- 관련성 점수 > 0.6인 상위 100개 선택
- --skip-validation 플래그로 검증 생략 가능 (빠른 처리)
- 책 제목, 저자명 기반 검색 쿼리 자동 생성

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-011: Ken Burns 효과 적용
**설명**: 정적 이미지를 부드럽게 움직이는 카메라 줌 효과로 표시

**세부 요구사항**:
- 줌인(zoom_in) 또는 줌아웃(zoom_out) 자동 선택
- 5초~10초 지속 시간 설정
- 이미지 종횡비 자동 유지
- 부드러운 곡선 움직임

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-012: 파형(Waveform) 시각화
**설명**: 오디오 신호의 주파수 스펙트럼을 실시간으로 표시

**세부 요구사항**:
- FFT(Fast Fourier Transform) 기반 주파수 분석
- 스크롤 가능한 파형 디스플레이
- 색상 그래디언트 (저주파 파란색 → 고주파 빨간색)
- 반응형 바(반응형 막대) 스타일 선택 가능

**우선순위**: Could Have
**구현 상태**: 부분 구현 (기본 파형 표시)

---

#### FR-013: 썸네일 자동 생성
**설명**: 4K 해상도(3840x2160)의 고품질 썸네일 자동 생성

**세부 요구사항**:
- 책 제목 및 저자명 텍스트 자동 삽입
- DALL-E 3로 AI 배경 이미지 생성 (선택사항)
- 색상 팔레트 자동 결정 (책 장르별)
- PNG 또는 JPG 형식 지원
- Input 폴더의 썸네일 이미지 감지 및 자동 사용

**우선순위**: Should Have
**구현 상태**: 구현됨

---

### 5.4 메타데이터 및 배포 기능

#### FR-014: 자동 제목 생성
**설명**: 가치 기반 제목과 장르 인식 자막을 자동으로 생성

**세부 요구사항**:
- 제목 형식: [한국어] 책제목 책 리뷰 | [Korean] 영문제목 Book Review
- 한글 제목: "[한국어] {제목} 책 리뷰 {작가명} | [Korean] {영문제목} Book Review"
- 영문 제목: "[English] {영문제목} Book Review {작가명} | [영어] {한글제목} 책 리뷰"
- YouTube 제목 제한(100자) 초과 시 자동 축약
- 명시적 요청 없으면 포맷 변경 금지

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-015: 챕터 마커(Timestamps) 자동 생성
**설명**: 영상의 주요 구간별로 타임스탐프 자동 생성

**세부 요구사항**:
- 요약 시작, 본론 시작, 마무리 구간 자동 감지
- 챕터명 자동 생성 (예: "도입", "핵심 내용", "정리")
- YouTube 설명 필드에 자동 삽입
- 재생 목록에서 챕터 검색 가능하도록 포맷

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-016: 다국어 설명 문자열 생성
**설명**: 유튜브 설명 필드에 한글 및 영문 설명 자동 생성

**세부 요구사항**:
- YouTube Localizations 필드 지원
- 각 언어별 독립적인 설명 텍스트
- 책 정보, 출판사, ISBN 포함
- 제휴 링크 및 주요 타임스탐프 자동 포함

**우선순위**: Must Have
**구현 상태**: 구현됨

---

#### FR-017: 제휴 링크 자동 삽입
**설명**: YouTube 설명에 Amazon, Aladin, Yes24 제휴 링크 자동 추가

**세부 요구사항**:
- Amazon Associates 태그 (AMAZON_ASSOCIATE_TAG 환경변수)
- Aladin 파트너스 ID (ALADIN_PARTNER_ID)
- Yes24 제휴 ID (YES24_PARTNER_ID)
- ISBN 기반 직접 링크 생성
- 환경변수 미설정 시 링크 제외

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-018: 태그(Tags) 자동 생성 및 검증
**설명**: 책 정보 기반으로 유튜브 태그 자동 생성 및 제한 사항 검증

**세부 요구사항**:
- 책 제목, 저자명, 주제 기반 태그 생성
- 각 태그 최대 30자 제한
- 전체 태그 크기 최대 500자 제한
- 초과 시 관련성 점수에 따라 자동 제거
- Smart filtering으로 중복 제거

**우선순위**: Should Have
**구현 상태**: 구현됨

---

### 5.5 유튜브 통합 및 배포 기능

#### FR-019: YouTube 자동 업로드
**설명**: 생성된 영상을 YouTube 채널에 자동으로 업로드

**세부 요구사항**:
- 배치 업로드 지원 (여러 영상 동시 업로드)
- 공개/비공개 선택 가능
- 업로드 전 사용자 명시적 확인 필수
- 업로드 진행 상황 실시간 표시
- 업로드 실패 시 재시도 로직

**우선순위**: Must Have
**구현 상태**: 구현됨
**특수 요구사항**: 사용자 명시적 허락 필수 ("업로드해줘" 요청)

---

#### FR-020: 메타데이터 편집
**설명**: 이미 업로드된 유튜브 영상의 제목, 설명, 태그를 업데이트

**세부 요구사항**:
- 비디오 ID 기반 영상 검색
- 제목, 설명, 태그 일괄 편집
- 플레이리스트 추가/제거
- 공개 설정 변경
- 변경 이력 추적

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-021: YouTube Shorts 생성
**설명**: 9:16 포맷(1080x1920, 최대 59초)의 YouTube Shorts 자동 생성

**세부 요구사항**:
- 영상 본편에서 HOOK/Quote/One-liner 자동 추출
- 9:16 세로 포맷으로 자동 변환
- 자막 자동 추가 (자동 읽기 기능 지원)
- 최대 59초 제한 자동 강제

**우선순위**: Could Have
**구현 상태**: 미구현

---

#### FR-022: 플레이리스트 자동 관리
**설명**: 책 장르별로 자동으로 분류하여 7개 플레이리스트에 추가

**세부 요구사항**:
- 장르 자동 감지 (예: 경영, 자기계발, 소설 등)
- 기존 플레이리스트 자동 탐색
- 신규 플레이리스트 자동 생성
- 영상 자동 추가
- 플레이리스트 순서 최적화

**우선순위**: Should Have
**구현 상태**: 부분 구현 (수동 플레이리스트 추가)

---

#### FR-023: 커뮤니티 포스트 자동화
**설명**: 주간 자동으로 채널 커뮤니티에 포스팅

**세부 요구사항**:
- 월요일: 책 인용문 공유
- 수요일: 투표 콘텐츠 (책 추천 투표 등)
- 금요일: 채널 업데이트 소식
- 자동 해시태그 추가
- 스케줄 커스터마이징 가능

**우선순위**: Could Have
**구현 상태**: 미구현

---

### 5.6 분석 및 최적화 기능

#### FR-024: YouTube 분석 데이터 수집
**설명**: 업로드된 영상의 조회수, 시청시간, 좋아요, 댓글 등 분석 데이터 자동 수집

**세부 요구사항**:
- YouTube Analytics API 통합
- 일일 자동 업데이트 (매일 자정)
- 조회수, 시청시간, CTR, 평균 시청시간 수집
- 좋아요, 댓글, 공유 횟수 추적
- 구독자 증가 추이 기록

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-025: 주간/월간 성과 리포트
**설명**: 채널 전체 성과를 Markdown 형식으로 자동 생성

**세부 요구사항**:
- 조회수, 시청시간, 신규 구독자 요약
- 상위 5개 영상 순위
- 전주/전월 대비 성장률
- 최적 시청 시간대 분석
- HTML 기반 대시보드 시각화

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-026: 최적 업로드 시간 분석
**설명**: 채널 시청자의 활동 패턴을 분석하여 최적 업로드 시간 제안

**세부 요구사항**:
- 요일별 성과 분석 (월-일)
- 시간대별 CTR/시청시간 분석
- 상위 3개 최적 시간대 제안
- 4주 업로드 캘린더 자동 생성
- 계절성 및 트렌드 반영

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-027: 채널 개선 제안
**설명**: AI 기반 채널 최적화 제안

**세부 요구사항**:
- 조회수 낮은 영상의 문제점 분석
- 자막, 제목, 썸네일 개선 제안
- 상위 영상 학습 및 전이 패턴 제안
- 영향도 우선순위 매김 (예: 제목 변경 시 +5% CTR 기대)

**우선순위**: Could Have
**구현 상태**: 부분 구현 (기본 분석)

---

### 5.7 배치 작업 및 유지보수 기능

#### FR-028: 제휴 링크 일괄 업데이트
**설명**: 기존 업로드된 모든 영상에 제휴 링크를 일괄 추가/업데이트

**세부 요구사항**:
- 미리보기 모드 (--dry-run, 기본값)
- 실제 적용 모드 (--apply)
- 이미 링크가 있는 영상도 강제 업데이트 가능 (--force)
- 변경 이력 로깅
- 롤백 기능 지원

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-029: 고정 댓글 일괄 추가
**설명**: 모든 영상에 챕터 타임스탐프 + 제휴 링크가 포함된 고정 댓글 추가

**세부 요구사항**:
- 미리보기 모드 (기본값)
- 실제 추가 모드 (--apply)
- 기존 댓글 업데이트 옵션 (--update-existing)
- youtube.force-ssl 스코프 필요
- YouTube UI에서 수동 "고정" 처리 필요

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-030: CSV 자동 업데이트
**설명**: YouTube 채널 정보를 자동으로 수집하여 ildangbaek_books.csv에 동기화

**세부 요구사항**:
- 업로드된 영상 목록 자동 수집
- status 필드를 "uploaded"로 업데이트
- youtube_uploaded 필드에 날짜 기록
- video_created 필드 자동 채우기
- 증분 업데이트 지원 (새로운 영상만)

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-031: 비디오 메타데이터 배치 처리
**설명**: 여러 영상의 메타데이터를 CSV 파일로 일괄 업데이트

**세부 요구사항**:
- CSV 파일 기반 변경사항 정의
- 비디오 ID, 새로운 제목, 설명, 태그 포함
- 검증 및 미리보기
- 일괄 적용 (--apply)
- 실패한 항목 로깅

**우선순위**: Should Have
**구현 상태**: 구현됨

---

### 5.8 파일 관리 및 자동화 기능

#### FR-032: Input 폴더 자동 처리
**설명**: input/ 폴더의 파일을 자동 감지하고 표준 네이밍으로 정렬

**세부 요구사항**:
- 유연한 파일명 패턴 인식 (예: book_name_타입_언어.확장자)
- 파일 유형 자동 감지 (오디오, 이미지, 비디오)
- 표준 위치로 자동 이동
- 중복 파일 처리 (덮어쓰기/무시)
- 처리 로그 기록

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-033: 표준 파일 네이밍 규칙
**설명**: 모든 생성 파일이 일관된 네이밍 규칙을 따르도록 강제

**세부 요구사항**:
- 패턴: {prefix}_타입_{언어}.{확장자}
- 예시: man_audio_kr.m4a, man_summary_en.md
- 자동 정규화 (공백 제거, 언어 코드 표준화)
- 기존 파일과 충돌 감지

**우선순위**: Should Have
**구현 상태**: 구현됨

---

#### FR-034: PNG to JPG 자동 변환
**설명**: 썸네일 이미지를 PNG에서 JPG로 자동 변환

**세부 요구사항**:
- 자동 해상도 감지 (4K, Full HD 등)
- 화질 설정 (기본값 90%)
- 메타데이터 보존
- 배치 변환 지원

**우선순위**: Could Have
**구현 상태**: 구현됨

---

#### FR-035: 책 번역 매핑 관리
**설명**: 한글 ↔ 영문 책 제목/저자명 매핑 450+개 관리

**세부 요구사항**:
- src/utils/translations.py에 매핑 테이블 유지
- translate_book_title() 함수
- translate_author_name() 함수
- 새로운 책 추가 시 자동 매핑 가능
- 매핑 검증 (중복, 오류 확인)

**우선순위**: Must Have
**구현 상태**: 구현됨

---

### 5.9 YouTube 스크립트 추출

#### FR-036: YouTube URL 자막 다운로드
**설명**: YouTube의 기존 영상에서 자막을 추출하여 스크립트 파일로 저장

**세부 요구사항**:
- youtube-transcript-api 활용
- Part 1, Part 2 등 여러 영상 지원
- 언어별 자막 추출 (한글, 영문)
- 출력: data/source/{책제목}_part{숫자}_{섹션}.txt
- IP 차단 우회 (쿠키 파일 자동 사용)
- 자막 없는 영상 오류 처리

**우선순위**: Should Have
**구현 상태**: 구현됨

---

## 6. 비기능 요구사항 (Non-Functional Requirements)

### 6.1 성능 요구사항

#### NFR-001: 영상 생성 시간
**요구사항**: 한 편의 영상 생성(Summary+Video) 최대 30분 이내
- 이미지 다운로드: 5분
- TTS 생성: 3분
- 영상 합성: 15분
- 메타데이터 생성: 2분

**측정 기준**: 평균 생성 시간 기록 및 병목 지점 분석

#### NFR-002: 일괄 작업 성능
**요구사항**: 일괄 업로드 최대 처리 능력 50개 영상/시간
- 배치 처리 병렬화
- YouTube API Rate Limit 준수 (400개/일)

#### NFR-003: 이미지 다운로드 성능
**요구사항**: 100개 이미지 다운로드 최대 5분 이내 (AI 검증 제외)
- --skip-validation 플래그로 5분 이내 달성 가능

---

### 6.2 확장성 요구사항

#### NFR-004: 동시 영상 생성
**요구사항**: 동시에 3개 이상의 영상 생성 지원
- 병렬 TTS 요청
- 병렬 이미지 처리
- 메모리 효율적 관리

#### NFR-005: 데이터 저장소 확장
**요구사항**: 1,000개 이상의 책 정보 저장 가능
- 효율적인 CSV 구조
- 인덱싱 지원 (향후)

---

### 6.3 신뢰성 요구사항

#### NFR-006: 재시도 로직
**요구사항**: 일시적 오류(네트워크, API 타임아웃) 자동 재시도
- 최대 3회 재시도
- Exponential backoff (1초, 2초, 4초)
- 사용자 명시적 오류는 스킵

#### NFR-007: 데이터 무결성
**요구사항**: 업로드 전 메타데이터 검증
- 필수 필드 확인
- 형식 검증 (제목 100자 이내 등)
- 저장소 일관성 유지

#### NFR-008: 오류 복구
**요구사항**: 중단된 작업 자동 복구
- 체크포인트 저장
- 마지막 완료 단계에서 재개

---

### 6.4 보안 요구사항

#### NFR-009: API 키 관리
**요구사항**: 모든 API 키를 secrets/ 폴더에 보관
- .env 파일 사용 (선택사항)
- secrets/client_secret.json (YouTube API)
- secrets/credentials.json (인증 토큰)
- secrets/google-cloud-tts-key.json (Google TTS)
- Git에서 제외 (.gitignore)

#### NFR-010: 인증 스코프
**요구사항**: YouTube API 스코프 제한
- youtube.upload: 영상 업로드 및 메타데이터 관리
- youtube.force-ssl: 댓글 작성 권한

#### NFR-011: 데이터 프라이버시
**요구사항**: 개인정보 보호
- 로그에 API 키 기록 금지
- 임시 파일 자동 정리
- 암호화 전송 (HTTPS)

---

### 6.5 유지보수성 요구사항

#### NFR-012: 코드 구조
**요구사항**: 모듈식 아키텍처
- 각 기능별 독립적 스크립트 (src/XX_*.py)
- 공유 유틸리티 분리 (src/utils/)
- 설정 중앙화

#### NFR-013: 로깅
**요구사항**: 상세한 작업 로그
- 각 단계별 진행 상황 기록
- 오류 스택 트레이스
- 성과 메트릭 (시간, 비용)

#### NFR-014: 문서화
**요구사항**: 완전한 사용자 및 개발자 문서
- README.md 최신 유지
- CLAUDE.md에 워크플로우 정리
- 함수/클래스 docstring 필수

#### NFR-015: 테스트
**요구사항**: 자동화된 테스트
- Unit test 커버리지 80% 이상
- CI/CD 파이프라인 (GitHub Actions)
- 실제 API 호출 테스트

---

### 6.6 호환성 요구사항

#### NFR-016: Python 버전
**요구사항**: Python 3.11.10 (pyenv 관리)
- 최신 타입 힌팅 지원
- asyncio 네이티브 지원

#### NFR-017: OS 호환성
**요구사항**: macOS 및 Linux 지원
- 파일 경로 자동 변환
- 절대 경로 사용 강제

#### NFR-018: 외부 의존성 관리
**요구사항**: 의존성 최소화 및 버전 고정
- requirements.txt 관리
- 주요 라이브러리 버전 호환성 테스트

---

### 6.7 가용성 요구사항

#### NFR-019: YouTube API 할당량
**요구사항**: 월 할당량 내 운영
- 비용: 일일 $10-20
- 월 최대 50개 영상 업로드 권장
- 비용 최적화 옵션 제공

#### NFR-020: 의존성 서비스 가용성
**요구사항**: 외부 API 장애 대응
- 재시도 로직 구현
- Fallback 옵션 (예: 다른 TTS 제공자)
- 사용자 알림 및 대체 방법 제시

---

## 7. 시스템 아키텍처 개요

### 7.1 아키텍처 다이어그램 (텍스트 기반)

```
┌─────────────────────────────────────────────────────────────┐
│                      사용자 인터페이스                         │
│  (CLI: Python 스크립트 + 환경변수)                            │
└────────────────┬────────────────────────────────────────────┘
                 │
        ┌────────▼─────────┐
        │  메인 오케스트레이션  │
        │  (src/10_*.py)   │
        └────────┬─────────┘
                 │
    ┌────────────┼────────────┐
    │            │            │
    ▼            ▼            ▼
┌─────────┐ ┌──────────┐ ┌──────────────┐
│ 콘텐츠  │ │ 멀티미디어│ │  배포 및     │
│ 생성    │ │ 처리     │ │  분석        │
│ 엔진    │ │          │ │              │
└─────────┘ └──────────┘ └──────────────┘
    │            │            │
    ├─ GPT/     ├─ MoviePy  ├─ YouTube
    │  Claude  │  Pillow   │  Analytics
    │  API     │  FFmpeg   │  API
    │          │ ImageMagick
    │
    └─ TTS (OpenAI/Google/Replicate)
    └─ Image APIs (Pexels/Pixabay/Unsplash)
    └─ Book APIs (Google Books)
    └─ YouTube API v3
```

### 7.2 주요 컴포넌트

#### 1. 콘텐츠 생성 엔진
- 자동 요약 생성 (Claude API / OpenAI GPT)
- TTS 음성 합성 (OpenAI / Google Cloud / Replicate)
- 번역 및 다국어 지원

#### 2. 멀티미디어 처리
- 이미지 수집 및 검증 (Pexels / Pixabay / Unsplash)
- 영상 합성 (MoviePy)
- 자막 생성 (Whisper API)
- 이미지 처리 (Pillow)

#### 3. 메타데이터 관리
- 제목, 설명, 태그 생성
- 챕터 마커 및 타임스탐프
- 제휴 링크 관리
- CSV 데이터 동기화

#### 4. 배포 및 분석
- YouTube 업로드 및 메타데이터 관리
- 분석 데이터 수집
- 성과 리포트 생성
- 최적화 제안

### 7.3 데이터 흐름

```
Input Files (input/)
    ↓
파일 검증 및 정규화
    ↓
요약 생성 (Claude/OpenAI)
    ↓
이미지 수집 및 검증
    ↓
TTS 음성 생성
    ↓
영상 합성 (영상 + 이미지 + 음성 + 자막)
    ↓
메타데이터 생성 (제목, 설명, 태그)
    ↓
썸네일 생성
    ↓
YouTube 업로드 (사용자 승인)
    ↓
분석 데이터 수집 및 보고
```

---

## 8. 데이터 모델

### 8.1 Book Info (book_info.json)

```json
{
  "title": "책 제목",
  "authors": ["저자명"],
  "publisher": "출판사",
  "description": "책 설명",
  "categories": ["카테고리"],
  "isbn_13_ko": "국내 ISBN-13",
  "isbn_10_ko": "국내 ISBN-10",
  "isbn_13_en": "영문 ISBN-13",
  "isbn_10_en": "영문 ISBN-10",
  "language": "ko",
  "google_books_id": "Google Books ID",
  "image_url": "표지 이미지 URL",
  "publish_date": "출판 날짜",
  "page_count": 페이지수,
  "average_rating": 평점,
  "rating_count": 평가수
}
```

### 8.2 Video Metadata (metadata.json)

```json
{
  "book_title": "책 제목",
  "language": "ko",
  "video_path": "/Users/.../output/book_title_kr.mp4",
  "thumbnail_path": "/Users/.../output/book_title_thumbnail_kr.jpg",
  "description": "유튜브 설명",
  "localizations": {
    "ko": {
      "title": "한글 제목",
      "description": "한글 설명"
    },
    "en": {
      "title": "English Title",
      "description": "English Description"
    }
  },
  "tags": ["태그1", "태그2"],
  "chapters": [
    {
      "title": "챕터 제목",
      "timestamp": "00:00:30"
    }
  ],
  "duration": 300,
  "created_at": "2026-02-20T10:30:00Z",
  "privacy_status": "private"
}
```

### 8.3 Books CSV (ildangbaek_books.csv)

| title | author | category | season | episode | status | video_created | youtube_uploaded | video_url | youtube_url |
|-------|--------|----------|--------|---------|--------|----------------|-----------------|-----------|------------|
| 책 제목 | 저자 | 카테고리 | 시즌 | 에피소드 | uploaded | 2026-02-20 | 2026-02-20 | /path/to/video | https://youtube.com/... |

### 8.4 요약 스크립트 (summary_{language}.md)

```markdown
<!-- 📘 책 제목 -->
<!-- 저자 이름 -->
<!-- TTS 기준 약 5분 서머리 스크립트 -->

## [HOOK – 도입]
핵심 질문이나 흥미로운 인용...

## [BODY – 본론]
주요 개념 1, 2, 3...

## [BRIDGE – 전환]
실생활 적용 및 행동 제안...
```

---

## 9. 외부 의존성

### 9.1 API 서비스

| 서비스 | 목적 | 요금 | 설정 |
|--------|------|------|------|
| **Google Books API** | 책 정보 조회 | 무료 (일일 제한) | API 키 |
| **Pexels API** | 무드 이미지 | 무료 | API 키 |
| **Pixabay API** | 무드 이미지 | 무료 | API 키 |
| **Unsplash API** | 무드 이미지 | 무료 | API 키 |
| **OpenAI API** | GPT-4, TTS, Whisper | $0.003-0.03/요청 | OPENAI_API_KEY |
| **Claude API** | 요약 생성, 검증 | $0.003-0.015/요청 | ANTHROPIC_API_KEY |
| **Google Cloud TTS** | 고품질 음성 | $4/100만 자 | service account 키 |
| **YouTube Data API v3** | 업로드, 분석 | 무료 | OAuth 인증 |
| **Aladin Partners** | 제휴 링크 | 수수료 기반 | ALADIN_PARTNER_ID |
| **Amazon Associates** | 제휴 링크 | 수수료 기반 | AMAZON_ASSOCIATE_TAG |

### 9.2 Python 라이브러리 (주요)

| 라이브러리 | 용도 | 버전 |
|-----------|------|------|
| google-auth | Google API 인증 | 2.x |
| google-cloud-texttospeech | Google Cloud TTS | 2.x |
| youtube-transcript-api | YouTube 자막 추출 | 0.6.x |
| moviepy | 영상 합성 | 1.x |
| Pillow | 이미지 처리 | 10.x |
| openai | OpenAI API | 1.x |
| anthropic | Claude API | 0.7.x |
| requests | HTTP 요청 | 2.3.x |
| google-cloud-storage | GCS 저장소 | 2.x |

---

## 10. 사용자 워크플로우

### 10.1 Summary+Video 영상 제작 워크플로우

**목표**: 5분 요약 + NotebookLM 리뷰 영상 합성

**단계별 프로세스**:

1. **준비 단계** (사용자)
   - Input 폴더에 필수 파일 준비:
     - NotebookLM 리뷰 오디오 ({prefix}_audio_ko.m4a, {prefix}_audio_en.m4a)
     - 요약 텍스트 (선택사항, 없으면 AI 생성)
     - 원본 썸네일 (선택사항)
   - 책 정보 확인 (제목, 저자)

2. **파일 처리** (자동)
   - Input 폴더 스캔 및 파일 정규화
   - 파일을 표준 위치로 이동

3. **이미지 수집** (자동)
   - 책 제목/저자 기반 100개 이미지 다운로드
   - Claude AI 검증 (관련성 > 0.6)
   - 상위 100개 선택

4. **요약 생성** (자동 또는 사용자 제공)
   - AI 요약 생성 또는 사용자 제공 요약 사용
   - Hook → Body → Bridge 구조 확인
   - Markdown 형식 정리

5. **TTS 생성** (자동)
   - 사용자가 TTS 제공자 선택
     - OpenAI (기본)
     - Google Cloud Neural2
     - Replicate xtts-v2
   - 언어별 음성 선택
   - 음성 파일 생성

6. **영상 합성** (자동)
   - 구조: Summary(5분) + NotebookLM + Review
   - 이미지 + Ken Burns 효과
   - 요약 음성 + 배경음악
   - 자동 자막 추가 (선택사항)
   - 최종 영상 저장

7. **메타데이터 생성** (자동)
   - 제목: [한국어] {제목} 책 리뷰 | [Korean] {영문} Book Review
   - 설명: 책 정보 + 제휴 링크 + 챕터 마커
   - 태그: 제목, 저자, 주제 기반
   - 썸네일: 4K 해상도 생성 또는 input 이미지 사용

8. **업로드** (사용자 승인 필수)
   - 영상 미리보기 및 메타데이터 확인
   - 사용자 "업로드해줘" 명시적 요청
   - 비공개(private) 또는 공개(public) 선택
   - 배치 업로드 지원

9. **검증 및 분석** (자동)
   - 업로드 완료 확인
   - 분석 데이터 수집 (조회수 등)
   - CSV 업데이트

**예상 소요 시간**: 30분 (병렬 처리 기준)

---

### 10.2 일당백 에피소드 영상 제작 워크플로우

**목표**: Part 1 → Part 2 → ... 순서로 영상 연결

**단계별 프로세스**:

1. **YouTube 스크립트 추출** (선택사항)
   - YouTube URL 제공
   - 자막 자동 다운로드
   - Part 1, Part 2 별도 텍스트 파일로 저장

2. **NotebookLM 생성** (사용자 수동)
   - 책 내용 업로드
   - NotebookLM에서 오디오 생성
   - Part별 비디오 및 인포그래픽 저장

3. **파일 준비** (자동)
   - Input 폴더에 파일 배치:
     - {책제목}/part1_video_ko.mp4
     - {책제목}/part1_info_ko.png
     - {책제목}/part2_video_ko.mp4
     - {책제목}/part2_info_ko.png
   - 파일 검증

4. **영상 연결** (자동)
   - Part 1 비디오 → 전환 효과 → Part 1 인포그래픽
   - Part 2 비디오 → 전환 효과 → Part 2 인포그래픽
   - ...
   - 배경음악 자동 적용
   - 자막 추가 (선택사항)

5. **메타데이터 생성** (자동)
   - 제목: [한국어] 책제목 책 리뷰 | [Korean] 영문제목 Book Review
   - 설명: 책 정보 + 챕터 마커
   - 태그: 일당백, 책제목, 저자

6. **업로드** (사용자 승인 필수)
   - 영상 미리보기 및 메타데이터 확인
   - 사용자 명시적 요청
   - 배포

**예상 소요 시간**: 20분 (영상 합성만, NotebookLM 제외)

---

## 11. 제약사항 및 한계

### 11.1 기술적 제약

| 제약 | 설명 | 대응 방안 |
|------|------|----------|
| **YouTube 제목 100자 제한** | 제목이 긴 경우 자동 축약 | 책 제목이 긴 경우 약칭 사용 |
| **YouTube 태그 500자 제한** | 태그가 많을 경우 관련성 낮은 것 제거 | Smart filtering 적용 |
| **YouTube Shorts 59초 제한** | Shorts 생성 시 자동 제한 | 핵심 내용만 추출 |
| **API Rate Limit** | YouTube API 일일 400개 제한 | 월 50개 이상 업로드 시 조절 필요 |
| **이미지 저작권** | 무료 이미지 출처 제한 | Pexels/Pixabay/Unsplash 사용 |

### 11.2 비용 제약

| 서비스 | 월 예상 비용 | 기준 |
|--------|-----------|------|
| OpenAI TTS | $10-20 | 10개 영상 × 5분 음성 |
| OpenAI GPT-4 | $5-10 | 10개 영상 요약 |
| Google Cloud TTS | $5-10 | 고품질 음성 사용 시 |
| YouTube Analytics API | 무료 | 포함 (YouTube API 할당량) |
| **월 합계** | **$20-50** | 10-15개 영상 생성 기준 |

### 11.3 운영 제약

| 제약 | 설명 | 대응 방안 |
|------|------|----------|
| **YouTube 업로드 승인** | 모든 업로드는 사용자 명시적 요청 필수 | "업로드해줘" 명시 요청 필수 |
| **OAuth 갱신** | YouTube OAuth 토큰 주기적 갱신 필요 | reauth_youtube.py 스크립트 제공 |
| **NotebookLM 수동 처리** | 일당백 영상의 경우 NotebookLM 수동 생성 필요 | 자동화 로드맵에 포함 |
| **커뮤니티 포스팅** | 수동 관리 (자동화 미구현) | 향후 자동화 계획 |

### 11.4 데이터 제약

| 제약 | 설명 |
|------|------|
| **번역 매핑 유지** | 450+ 책 제목/저자 매핑 수동 관리 |
| **이미지 검증** | Claude API 검증 시 비용 추가 ($0.005/이미지) |
| **분석 지연** | YouTube 분석 데이터 24시간 지연 |

---

## 12. 용어집

### 12.1 영상 관련 용어

| 용어 | 영문 | 설명 |
|------|------|------|
| 요약 | Summary | 책의 핵심을 5분 분량으로 축약한 음성 내레이션 |
| 리뷰 | Review | NotebookLM에서 생성한 책 내용 설명 영상 |
| 일당백 | Full Episode | 여러 Part를 순차적으로 연결한 장편 영상 |
| 인포그래픽 | Infographic | Part 사이에 삽입하는 시각 정보 슬라이드 |
| 자막 | Subtitle | 음성 내용을 텍스트로 표시 |
| 썸네일 | Thumbnail | 유튜브 영상 목록에 표시되는 이미지 |
| TTS | Text-To-Speech | 텍스트를 음성으로 변환 |
| Ken Burns 효과 | Ken Burns Effect | 정적 이미지를 부드럽게 확대/축소하는 카메라 움직임 |
| 파형 | Waveform | 오디오 신호의 주파수 시각화 |

### 12.2 유튜브 관련 용어

| 용어 | 영문 | 설명 |
|------|------|------|
| 제목 | Title | 유튜브 영상 제목 (100자 제한) |
| 설명 | Description | 유튜브 영상 설명 (5000자 제한) |
| 태그 | Tags | 검색 최적화용 키워드 (30자/태그, 500자 합계) |
| 챕터 마커 | Chapters/Timestamps | 영상 내 구간 표시 (재생 목록에서 검색 가능) |
| Localizations | Multi-language Descriptions | 각 언어별 독립적인 제목/설명 |
| 플레이리스트 | Playlist | 관련 영상을 모아놓은 목록 |
| 커뮤니티 | Community | 채널의 텍스트/투표/이미지 포스트 |
| 제휴 링크 | Affiliate Links | Amazon/Aladin 등에서 수수료를 받는 링크 |

### 12.3 기술 관련 용어

| 용어 | 영문 | 설명 |
|------|------|------|
| API | Application Programming Interface | 외부 서비스와의 통신 인터페이스 |
| OAuth | Open Authorization | 사용자 인증 표준 (YouTube 로그인) |
| CSV | Comma-Separated Values | 표 형식 텍스트 파일 |
| JSON | JavaScript Object Notation | 구조화된 데이터 형식 |
| MD/Markdown | Markdown | 간단한 형식 지정 언어 |
| Whisper | Whisper API | OpenAI의 음성-텍스트 변환 모델 |
| FFmpeg | FFmpeg | 멀티미디어 프레임워크 |
| MoviePy | MoviePy | Python 영상 편집 라이브러리 |

### 12.4 프로젝트 구조 용어

| 용어 | 설명 |
|------|------|
| input/ | 사용자가 준비한 파일 폴더 (오디오, 썸네일 등) |
| assets/ | 생성된 리소스 (이미지, 오디오, 비디오 등) |
| output/ | 최종 영상 및 썸네일 저장 위치 |
| secrets/ | API 키 및 인증 파일 (Git 제외) |
| src/ | 메인 소스 코드 |
| scripts/ | 유틸리티 스크립트 |
| data/ | 데이터 파일 (YouTube 자막, CSV 등) |

---

## 13. 문서 변경 이력

| 버전 | 날짜 | 변경 사항 |
|------|------|----------|
| 1.0.0 | 2026-02-20 | 초기 작성 (FR-001~036, NFR-001~020) |

---

**문서 상태**: 활성 (Active)
**다음 검토 일정**: 2026-04-20
**담당자**: Engineering Team
