# BookReview-AutoMaker 프로젝트 히스토리

## 2024-11-23

### 초기 프로젝트 설정
- 프로젝트 디렉토리 구조 생성
- Phase 1: 자료 수집 자동화 코드 작성
  - `01_search_urls.py`: 책 관련 URL 수집 스크립트
    - 위키백과, 온라인 서점, 뉴스 리뷰 타겟 검색
    - NotebookLM용 텍스트 파일 출력
    - CSV/JSON 파일로 일괄 처리 지원
  - `02_get_images.py`: 이미지 다운로드 스크립트
    - Google Books API로 책 표지 다운로드
    - Pexels/Unsplash API로 무드 이미지 다운로드 (5~10장)
    - assets/images/{책제목}/ 폴더에 정리

### 환경 설정
- requirements.txt 작성
- .env 파일 설정 (모든 API 키 포함)
- 가상환경 설정 스크립트 작성
- 실행 스크립트 작성 (가상환경 자동 활성화)

### API 키 설정
- GOOGLE_BOOKS_API_KEY: 설정 완료
- PEXELS_API_KEY: 설정 완료
- UNSPLASH_ACCESS_KEY: 설정 완료
- OPENAI_API_KEY: 설정 완료
- CLAUDE_API_KEY: 설정 완료

### 패키지 설치
- python-dotenv, requests, beautifulsoup4, lxml
- googlesearch-python
- google-api-python-client
- pexels-api
- moviepy, pydub (Phase 4용)

### 프로젝트 문서화
- README.md 작성 (설치 방법, 사용법, API 키 발급 방법)
- TODO 파일 생성
- HISTORY 파일 생성
- RULES 파일 생성 (예정)

### Git 설정
- .gitignore 설정
- 자동 커밋/푸시 스크립트 작성

## 다음 작업
- Phase 4: 영상 합성 및 편집 기능 구현
- 테스트 및 버그 수정


## 2025-11-23

### YouTube 업로드 완료
- 업로드된 책: 노르웨이의_숲
- 업로드된 영상 수: 2개
- [1] [English] Norwegian Wood Book Review | [영어] 노르웨이의 숲 책 리뷰 | Auto-Generated
  - URL: https://www.youtube.com/watch?v=6L2zcTHfMXg
- [2] [한국어] 노르웨이의 숲 책 리뷰 | [Korean] Norwegian Wood Book Review | 일당백 스타일
  - URL: https://www.youtube.com/watch?v=w4D-PVE3Aa0

## 2025-11-24

### 영상 생성 최적화
- **줌인/줌아웃 효과 제거**: 정적 이미지 + 페이드 전환만 사용하도록 변경
- **비트레이트 조정**: 1500k로 낮춰서 정적 이미지 영상에 최적화
- **MoviePy API 수정**: `resized` → `resize` 메서드 변경 (호환성 개선)
- **파일 크기 최적화**: 15.7분 영상 기준 약 172MB (이전 725MB에서 대폭 감소)

### 1984 영상 생성 진행 중
- **한글 영상**: ✅ 완료
  - 파일: `output/1984_review_ko.mp4`
  - 크기: 183MB
  - 길이: 15.7분 (940초)
  - 생성 시간: 2025-11-24 00:38
  - 이미지: 21개 (cover 1개 + mood 20개)
  - 설정: 정적 이미지 + 페이드 전환, 비트레이트 1500k
- **영문 영상**: ⏳ 대기 중 (영문 오디오 파일 필요)
- **썸네일**: ⏳ 대기 중
- **메타데이터**: ⏳ 대기 중

### URL 수집 배치 작업 진행 중
- **백그라운드 프로세스**: 실행 중 (PID: 78980)
- **진행률**: 59% (167/283개 완료)
- **총 항목**: 283개
  - 책: 83개 (노르웨이의 숲 제외)
  - 주제: 200개
- **생성된 파일**: 167개 MD 파일 (`assets/urls/` 폴더)
- **최근 생성**: 2025-11-24 08:50 (프리랜서_경제Gig_Economy의_구조_notebooklm.md)
- **예상 완료 시간**: 약 40-50분 후 (남은 116개 항목)

### 노르웨이의 숲 관련 파일 삭제
- 오디오 파일 삭제
- 이미지 파일 삭제 (20개)
- URL MD 파일 삭제
- CSV에서 제외

### 코드 개선
- URL 수집 스크립트 개선: DuckDuckGo 검색 + YouTube API 통합
- 배치 URL 수집 스크립트 추가 (`scripts/batch_collect_urls.py`)
- 전체 파이프라인 스크립트 추가 (`src/12_full_pipeline.py`)
- 유틸리티 모듈 추가 (`src/utils/`)
- 썸네일 생성 및 업로드 스크립트 추가 (`src/10_generate_thumbnail.py`, `src/11_upload_thumbnails.py`)

### Git 커밋
- 커밋 해시: `5d4ac07`
- 메시지: "feat: 영상 생성 최적화 - 줌인 효과 제거 및 비트레이트 조정"
- 변경: 47개 파일, 3,864줄 추가, 248줄 삭제

## 2024-11-24 (후반)

### 요약 및 TTS 기능 추가 ✅
- **AI 기반 책 요약 생성** (`src/08_generate_summary.py`)
  - Claude API 또는 OpenAI API 사용
  - 한글/영문 지원
  - 인트로/아웃트로 자동 추가
  - 한글 존댓말 강제 적용
  - 최소 단어 수 보장 로직

- **TTS 음성 생성** (`src/09_text_to_speech.py`)
  - OpenAI TTS API 사용
  - 한글: 'nova' 음성 (자연스러운 여성 음성)
  - 영어: 'alloy' 음성
  - 긴 텍스트 자동 분할 (4096자 제한 대응)
  - 문장 단위 분할 및 오디오 병합

- **요약 포함 영상 제작** (`src/10_create_video_with_summary.py`)
  - 요약 오디오와 리뷰 오디오 자동 연결
  - 3초 간격 추가 (자연스러운 전환)
  - 페이드 인/아웃 효과

### 영상 생성 개선 ✅
- **이미지 순환 반복**: 최대 100개 이미지를 영상 길이에 맞춰 순환 반복
- **페이드 전환**: fade in/out 효과로 자연스러운 전환
- **오디오 연결**: 요약 오디오 + 3초 간격 + 리뷰 오디오

### 썸네일 생성 기능 ✅
- **자동 썸네일 생성** (`src/10_generate_thumbnail.py`)
  - 책 제목, 작가 정보 포함
  - 한글/영문 버전 지원
  - DALL-E 배경 이미지 옵션
  - YouTube 권장 크기 (1280x720)
  - 그라데이션 배경 지원

### 1984 영상 생성 완료
- **한글 영상**: ✅ 완료
  - 파일: `output/1984_review_with_summary_ko.mp4`
  - 크기: 232MB
  - 길이: 19분 53초
  - 구성: 요약 (2.8분) + 3초 간격 + 리뷰 (17분)
  - 이미지: 100개 순환 반복
  - 썸네일: `output/1984_thumbnail_ko.jpg` (201K)

- **영어 영상**: ⚠️ 요약 미포함 (나중에 재생성 예정)
  - 파일: `output/1984_review_with_summary_en.mp4`
  - 크기: 454MB
  - 길이: 38분 38초
  - 썸네일: `output/1984_thumbnail_en.jpg` (206K)

### 코드 개선
- 텍스트 분할 로직 개선 (TTS API 제한 대응)
- 오디오 연결 로직 개선 (fade 효과, 간격 추가)
- 이미지 순환 로직 개선 (100개 이미지 순환 반복)
- 인트로/아웃트로 중복 제거 로직 개선
- 메타데이터에 요약/리뷰 정보 포함

### Git 커밋 준비
- README 업데이트 (새로운 기능 추가)
- history 파일 업데이트
- 임시 파일 정리

## 2025-11-25

### YouTube 업로드 완료
- 업로드된 책: 1984_with_summary_en, 1984_with_summary_ko
- 업로드된 영상 수: 2개
- [1] [English] 1984 Book Review | [영어] 1984 책 리뷰 | Auto-Generated
  - URL: https://www.youtube.com/watch?v=cRd7BWQV4S8
- [2] [한국어] 1984 책 리뷰 | [Korean] 1984 Book Review | 일당백 스타일
  - URL: https://www.youtube.com/watch?v=_dhn1O7BWNs
