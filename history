# BookReview-AutoMaker 프로젝트 히스토리

## 2024-11-23

### 초기 프로젝트 설정
- 프로젝트 디렉토리 구조 생성
- Phase 1: 자료 수집 자동화 코드 작성
  - `01_search_urls.py`: 책 관련 URL 수집 스크립트
    - 위키백과, 온라인 서점, 뉴스 리뷰 타겟 검색
    - NotebookLM용 텍스트 파일 출력
    - CSV/JSON 파일로 일괄 처리 지원
  - `02_get_images.py`: 이미지 다운로드 스크립트
    - Google Books API로 책 표지 다운로드
    - Pexels/Unsplash API로 무드 이미지 다운로드 (5~10장)
    - assets/images/{책제목}/ 폴더에 정리

### 환경 설정
- requirements.txt 작성
- .env 파일 설정 (모든 API 키 포함)
- 가상환경 설정 스크립트 작성
- 실행 스크립트 작성 (가상환경 자동 활성화)

### API 키 설정
- GOOGLE_BOOKS_API_KEY: 설정 완료
- PEXELS_API_KEY: 설정 완료
- UNSPLASH_ACCESS_KEY: 설정 완료
- OPENAI_API_KEY: 설정 완료
- CLAUDE_API_KEY: 설정 완료

### 패키지 설치
- python-dotenv, requests, beautifulsoup4, lxml
- googlesearch-python
- google-api-python-client
- pexels-api
- moviepy, pydub (Phase 4용)

### 프로젝트 문서화
- README.md 작성 (설치 방법, 사용법, API 키 발급 방법)
- TODO 파일 생성
- HISTORY 파일 생성
- RULES 파일 생성 (예정)

### Git 설정
- .gitignore 설정
- 자동 커밋/푸시 스크립트 작성

## 2024-11-23 (계속)

### Phase 4: 영상 합성 및 편집 구현 완료
- `03_make_video.py`: 영상 제작 스크립트 작성
  - 오디오 로드 및 이미지 시퀀스 생성
  - Ken Burns 효과 (기본 구현)
  - 페이드 전환 효과
  - OpenAI Whisper 자막 지원
  - 1080p, 30fps MP4 렌더링
- 첫 번째 영상 생성 성공: "노르웨이의 숲" 리뷰 영상

### YouTube 영상 검색 기능 추가
- `06_search_youtube.py`: GPT/Claude API를 사용한 YouTube 영상 검색
  - AI 기반 검색 쿼리 생성
  - YouTube Data API v3 연동
  - 관련성 검증 로직 추가
  - NotebookLM용 마크다운 파일 자동 업데이트

### 이미지 다운로드 기능 구현
- `02_get_images.py`: 이미지 다운로드 스크립트
  - Google Books API로 책 표지 다운로드
  - Unsplash/Pexels API로 무드 이미지 다운로드
  - 책 정보 JSON 저장

### 프로젝트 문서화
- README.md 작성 완료
- rules 파일 생성
- .gitignore 파일 생성
- assets 폴더 Git 추가 (다른 머신에서 작업 이어가기 위해)

## 2024-11-23 (계속)

### 이미지 다운로드 개선
- AI 기반 키워드 생성 기능 추가 (`generate_keywords_with_ai`)
  - 책 내용/설명을 분석하여 구체적인 이미지 검색 키워드 생성
  - 배경, 감정, 테마, 장소 등을 반영한 키워드
  - 예: "melancholy young man", "lost first love", "vintage japanese dormitory"
- 책과 더 관련성 높은 이미지 검색 가능

### 저작권 관련 개선
- 책 표지 이미지는 저작권 문제로 영상에 사용하지 않음
- 저작권 없는 무드 이미지만 사용
- 썸네일도 무드 이미지 사용

### 한글/영문 영상 제작 지원
- `07_make_videos_both_languages.py`: 한글/영문 오디오 각각에 대해 영상 제작
- 파일명에서 언어 자동 감지 (`_ko`, `_en` 접미사)
- YouTube 업로드 시 언어별 메타데이터 자동 생성

### YouTube 업로드 개선
- 파일명에서 언어 자동 감지 기능 추가
- 언어별 제목/설명/태그 자동 생성

## 다음 작업
- Phase 4 Ken Burns 효과 고도화 (선택사항)
- 테스트 및 버그 수정
- 추가 책으로 테스트


## 2025-11-23

### YouTube 업로드 완료
- 업로드된 책: 노르웨이의_숲
- 업로드된 영상 수: 2개
- [1] [English] Norwegian Wood Book Review | [영어] 노르웨이의 숲 책 리뷰 | Auto-Generated
  - URL: https://www.youtube.com/watch?v=6L2zcTHfMXg
- [2] [한국어] 노르웨이의 숲 책 리뷰 | [Korean] Norwegian Wood Book Review | 일당백 스타일
  - URL: https://www.youtube.com/watch?v=w4D-PVE3Aa0

## 2025-11-24

### 영상 생성 최적화
- **줌인/줌아웃 효과 제거**: 정적 이미지 + 페이드 전환만 사용하도록 변경
- **비트레이트 조정**: 1500k로 낮춰서 정적 이미지 영상에 최적화
- **MoviePy API 수정**: `resized` → `resize` 메서드 변경 (호환성 개선)
- **파일 크기 최적화**: 15.7분 영상 기준 약 172MB (이전 725MB에서 대폭 감소)

### 1984 영상 생성 진행 중
- **한글 영상**: ✅ 완료
  - 파일: `output/1984_review_ko.mp4`
  - 크기: 183MB
  - 길이: 15.7분 (940초)
  - 생성 시간: 2025-11-24 00:38
  - 이미지: 21개 (cover 1개 + mood 20개)
  - 설정: 정적 이미지 + 페이드 전환, 비트레이트 1500k
- **영문 영상**: ⏳ 대기 중 (영문 오디오 파일 필요)
- **썸네일**: ⏳ 대기 중
- **메타데이터**: ⏳ 대기 중

### URL 수집 배치 작업 진행 중
- **백그라운드 프로세스**: 실행 중 (PID: 78980)
- **진행률**: 59% (167/283개 완료)
- **총 항목**: 283개
  - 책: 83개 (노르웨이의 숲 제외)
  - 주제: 200개
- **생성된 파일**: 167개 MD 파일 (`assets/urls/` 폴더)
- **최근 생성**: 2025-11-24 08:50 (프리랜서_경제Gig_Economy의_구조_notebooklm.md)
- **예상 완료 시간**: 약 40-50분 후 (남은 116개 항목)

### 노르웨이의 숲 관련 파일 삭제
- 오디오 파일 삭제
- 이미지 파일 삭제 (20개)
- URL MD 파일 삭제
- CSV에서 제외

### 코드 개선
- URL 수집 스크립트 개선: DuckDuckGo 검색 + YouTube API 통합
- 배치 URL 수집 스크립트 추가 (`scripts/batch_collect_urls.py`)
- 전체 파이프라인 스크립트 추가 (`src/12_full_pipeline.py`)
- 유틸리티 모듈 추가 (`src/utils/`)
- 썸네일 생성 및 업로드 스크립트 추가 (`src/10_generate_thumbnail.py`, `src/11_upload_thumbnails.py`)

### Git 커밋
- 커밋 해시: `5d4ac07`
- 메시지: "feat: 영상 생성 최적화 - 줌인 효과 제거 및 비트레이트 조정"
- 변경: 47개 파일, 3,864줄 추가, 248줄 삭제
