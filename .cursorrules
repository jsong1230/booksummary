# 프로젝트 규칙

## 영상 제작 파이프라인 규칙

### 이미지 다운로드
- 무드 이미지는 **100개**를 다운로드 받아야 함
- 책의 저자와 주제와 관련된 이미지를 다운로드
- `--num-mood 100` 옵션 사용

### 요약 생성
- 요약 오디오는 **5분 목표**로 생성
- `--summary-duration 5.0` 옵션 사용
- 요약 텍스트는 최소 750단어 이상 (5분 × 150단어/분)

### 오디오 연결
- 요약 오디오와 리뷰 오디오를 연결할 때 **3초간의 silence**를 추가
- `gap_duration=3.0` 파라미터 사용 (src/03_make_video.py의 concatenate_audios 함수)

### 영상 제작 순서
1. 이미지 다운로드 (100개)
2. 요약 생성 (5분 목표)
3. TTS로 요약 오디오 생성
4. 요약 오디오 + 리뷰 오디오 연결 (3초 silence)
5. 영상 생성
6. 썸네일 생성
7. 메타데이터 생성
8. (업로드는 수동으로)

## Git 커밋 전 필수 작업

### 커밋 전 반드시 수행할 작업
**중요: Git 커밋 전에 반드시 다음 파일들을 업데이트해야 합니다:**

1. **TODO.md 파일 업데이트**
   - 완료된 작업 체크 표시
   - 새로운 작업 항목 추가
   - 진행 중인 작업 상태 업데이트

2. **history 파일 업데이트**
   - **반드시 정확한 날짜로 새 섹션 추가** (예: `## 2025-11-25`)
   - 날짜는 `date +"%Y-%m-%d"` 명령어로 확인하여 정확하게 기록
   - 주요 변경사항 기록
   - 완료된 작업 요약
   - 생성된 파일 및 크기 정보

3. **README.md 업데이트**
   - 새로운 기능 추가 시 문서화
   - 사용법 변경 시 업데이트
   - 주요 개선사항 반영
   - **코드 변경 시 반드시 관련 문서 섹션도 함께 업데이트**
   - 파일 구조 변경 시 "프로젝트 구조" 섹션 업데이트
   - 파일 네이밍 규칙 변경 시 "사용 방법" 섹션 업데이트
   - 환경 변수 추가 시 "환경 변수 설정" 섹션 업데이트
   - API 우선순위 변경 시 "주요 기능" 섹션 업데이트

4. **ildangbaek_books.csv 업데이트**
   - 유튜브 채널에 업로드된 책 정보 업데이트
   - `python src/13_update_csv_from_youtube.py` 실행하여 최신 업로드 정보 반영
   - `status` 필드를 `uploaded`로 업데이트
   - `youtube_uploaded` 필드에 업로드 날짜 기록
   - 업로드된 책의 `video_created` 필드도 함께 업데이트 (없는 경우)

**커밋 전 체크리스트:**
- [ ] TODO.md 파일 업데이트 완료
- [ ] history 파일 업데이트 완료 (정확한 날짜 확인: `date +"%Y-%m-%d"`)
- [ ] README.md 업데이트 완료
- [ ] ildangbaek_books.csv 업데이트 완료 (유튜브 업로드 정보 반영)
- [ ] 변경사항 확인 (git status)
- [ ] 커밋 메시지 작성
- [ ] **사용자에게 최종 확인 요청** (커밋/푸시 실행 전)
- [ ] 사용자 승인 후 커밋 실행
- [ ] 사용자 승인 후 푸시 실행

## 문서 업데이트 규칙

### 코드 변경 시 문서 동시 업데이트 필수
**중요: 코드를 수정할 때는 반드시 관련 문서도 함께 업데이트해야 합니다.**

1. **파일 구조 변경 시:**
   - README.md의 "프로젝트 구조" 섹션 업데이트
   - 파일 이동 시 경로 변경 사항 반영

2. **파일 네이밍 규칙 변경 시:**
   - README.md의 "사용 방법" 섹션에 네이밍 규칙 명시
   - 예시 파일명 업데이트

3. **환경 변수 추가/변경 시:**
   - `.env.example` 파일 업데이트
   - README.md의 "환경 변수 설정" 섹션 업데이트

4. **새로운 기능 추가 시:**
   - README.md의 "사용 방법" 또는 "주요 기능" 섹션에 추가
   - 사용 예시 및 파라미터 설명 포함

5. **API 우선순위 변경 시:**
   - README.md의 관련 섹션에 우선순위 명시
   - 예: "Pexels (1순위) → Pixabay (2순위) → Unsplash (3순위)"

6. **영상 구조 변경 시:**
   - README.md의 "프로젝트 개요"와 "워크플로우" 섹션 모두 업데이트
   - 영상 구성 순서 명확히 설명

## 날짜 기록 규칙

### 날짜 기록 시 주의사항
- **모든 날짜는 반드시 정확하게 기록해야 합니다**
- history 파일에 날짜를 기록할 때는 `date +"%Y-%m-%d"` 명령어로 현재 날짜를 확인
- 날짜 형식: `YYYY-MM-DD` (예: `2025-11-25`)
- 추측하거나 임의로 날짜를 기록하지 말 것
- history 파일의 날짜 섹션은 시간순으로 정렬 (최신 날짜가 아래)
